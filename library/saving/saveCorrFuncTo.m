function saveCorrFuncTo(corrFuncDirectory,corrFuncForDifferentNN,atomIndex ...
    ,NNcases,simDurInNs,deltaTInPs,theta,phi)

corrFuncOrder = strrep(inputname(2),"corrFunc","");
for numberOfNNCases = 1:size(corrFuncForDifferentNN,1)
    corrFunc = corrFuncForDifferentNN(numberOfNNCases,:); %#ok<NASGU>
    savingName = sprintf("%s_atomIndex%i_NN%i_simDur%sns_dT" ...
        + "%sps_theta%s_phi%s",corrFuncOrder ...
        ,atomIndex,NNcases(numberOfNNCases) ...
        ,getDecimalNumberAsSeparatedWithUnderScore(simDurInNs) ...
        ,getDecimalNumberAsSeparatedWithUnderScore(deltaTInPs) ...
        ,getDecimalNumberAsSeparatedWithUnderScore(theta) ...
        ,getDecimalNumberAsSeparatedWithUnderScore(phi));
    if exist(corrFuncDirectory+savingName+".mat",'file')
        movefile(corrFuncDirectory+savingName+".mat" ...
            ,corrFuncDirectory+savingName+sprintf("_OLD%s.mat" ...
            ,datestr(now,"yyyymmdd_HHMM")),'f');
    end
    save(corrFuncDirectory+savingName+".mat",'corrFunc','-v7.3')
end

if ~isfile(corrFuncDirectory+savingName+".mat")
    error("%s was not saved",savingName);
end

end